{"ast":null,"code":"import _slicedToArray from \"@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"@babel/runtime-corejs2/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/Users/jacob/Development/booksontap/pages/index.tsx\";\nimport React from \"react\";\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n\\tfont-size: 1.25rem;\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n\\tdisplay: flex;\\n\\tflex-direction: row;\\n\\tflex-wrap: wrap;\\n\\tjustify-content: space-around;\\n\\tlist-style: none;\\n\\tpadding: 0;\\n\\n\\tli {\\n\\t\\twidth: 30%;\\n\\t\\tmin-width: 300px;\\n\\t\\tmargin: 1rem;\\n\\t\\tflex-grow: 1;\\n\\t}\\n\\timg {\\n\\t\\tdisplay: block;\\n\\t\\tmax-width: 100%;\\n\\t}\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport styled from \"styled-components\";\nimport Link from \"next/link\";\nvar Books = styled.ul(_templateObject());\nvar Price = styled.span(_templateObject2());\n\nvar BookLink = function BookLink(_ref) {\n  var slug = _ref.slug,\n      children = _ref.children;\n  return React.createElement(Link, {\n    href: \"/book/[slug]\",\n    as: \"/book/\".concat(slug),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31\n    },\n    __self: this\n  }, React.createElement(\"a\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32\n    },\n    __self: this\n  }, children));\n};\n\nvar indexPage = function indexPage() {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      books = _useState2[0],\n      setBooks = _useState2[1];\n\n  var getBooks = function getBooks() {\n    return axios.get(\"https://booksontap.azurewebsites.net/api/Books\");\n  };\n\n  useEffect(function () {\n    getBooks().then(function (res) {\n      setBooks(res.data);\n    });\n  }, []);\n\n  var toLocalCurrency = function toLocalCurrency(amount) {\n    var country = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"en-GB\";\n    var currency = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"GBP\";\n    return new Intl.NumberFormat(country, {\n      style: \"currency\",\n      currency: currency\n    }).format(amount);\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, \"Books on tap\"), React.createElement(Books, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, books.length !== 0 ? books.results.map(function (book) {\n    return React.createElement(\"li\", {\n      key: book.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: book.thumbnail,\n      alt: book.title,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }), React.createElement(Price, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, toLocalCurrency(book.price)), React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, React.createElement(BookLink, {\n      slug: book.id,\n      content: book,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, book.title)), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, \"by \".concat(book.author.firstName, \" \").concat(book.author.lastName)));\n  }) : React.createElement(\"li\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }, \"Loading ...\")));\n};\n\nexport default indexPage;","map":{"version":3,"sources":["/Users/jacob/Development/booksontap/pages/index.tsx"],"names":["useEffect","useState","axios","styled","Link","Books","ul","Price","span","BookLink","slug","children","indexPage","books","setBooks","getBooks","get","then","res","data","toLocalCurrency","amount","country","currency","Intl","NumberFormat","style","format","length","results","map","book","id","thumbnail","title","price","author","firstName","lastName"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\"\nimport axios from \"axios\"\nimport styled from \"styled-components\"\nimport Link from \"next/link\"\n\nconst Books = styled.ul`\n\tdisplay: flex;\n\tflex-direction: row;\n\tflex-wrap: wrap;\n\tjustify-content: space-around;\n\tlist-style: none;\n\tpadding: 0;\n\n\tli {\n\t\twidth: 30%;\n\t\tmin-width: 300px;\n\t\tmargin: 1rem;\n\t\tflex-grow: 1;\n\t}\n\timg {\n\t\tdisplay: block;\n\t\tmax-width: 100%;\n\t}\n`\n\nconst Price = styled.span`\n\tfont-size: 1.25rem;\n`\n\nconst BookLink = ({ slug, children }: IProps) => (\n\t<Link href=\"/book/[slug]\" as={`/book/${slug}`}>\n\t\t<a>{children}</a>\n\t</Link>\n)\n\ninterface IProps {\n\tslug: string\n\tchildren?: any\n\tcontent: string\n}\n\ninterface IBooks {\n\tresults: [\n\t\t{\n\t\t\tid: string\n\t\t\ttitle: string\n\t\t\tauthor: {\n\t\t\t\tid: string\n\t\t\t\tfirstName: string\n\t\t\t\tlastName: string\n\t\t\t}\n\t\t\tprice: number\n\t\t\tdescription: string\n\t\t\tstockAmount: number\n\t\t\tthumbnail: string\n\t\t\tisbn: string\n\t\t}\n\t]\n}\n\nconst indexPage = () => {\n\tconst [books, setBooks] = useState<IBooks>([])\n\n\tconst getBooks = () => {\n\t\treturn axios.get(`https://booksontap.azurewebsites.net/api/Books`)\n\t}\n\n\tuseEffect(() => {\n\t\tgetBooks().then(res => {\n\t\t\tsetBooks(res.data)\n\t\t})\n\t}, [])\n\n\tconst toLocalCurrency = (amount, country = \"en-GB\", currency = \"GBP\") => {\n\t\treturn new Intl.NumberFormat(country, {\n\t\t\tstyle: \"currency\",\n\t\t\tcurrency: currency,\n\t\t}).format(amount)\n\t}\n\n\treturn (\n\t\t<div>\n\t\t\t<h1>Books on tap</h1>\n\t\t\t<Books>\n\t\t\t\t{books.length !== 0 ? (\n\t\t\t\t\tbooks.results.map(book => (\n\t\t\t\t\t\t<li key={book.id}>\n\t\t\t\t\t\t\t<img src={book.thumbnail} alt={book.title} />\n\t\t\t\t\t\t\t<Price>{toLocalCurrency(book.price)}</Price>\n\t\t\t\t\t\t\t<h2>\n\t\t\t\t\t\t\t\t<BookLink slug={book.id} content={book}>\n\t\t\t\t\t\t\t\t\t{book.title}\n\t\t\t\t\t\t\t\t</BookLink>\n\t\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t\t<p>{`by ${book.author.firstName} ${\n\t\t\t\t\t\t\t\tbook.author.lastName\n\t\t\t\t\t\t\t}`}</p>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t))\n\t\t\t\t) : (\n\t\t\t\t\t<li>Loading ...</li>\n\t\t\t\t)}\n\t\t\t</Books>\n\t\t</div>\n\t)\n}\n\nexport default indexPage\n"]},"metadata":{},"sourceType":"module"}